# 리팩터링 2판
### 코드 구조를 체계적으로 개선하여 효율적인 리팩터링 구현하기

리팩터링을 하기전에 항상 테스트코드를 작성하기를 이 책에서 권하고 있다.  
때문에 본문에는 없지만 테스트도구 JEST 를 사용하여 테스트코드를 직접 작성하고 리팩토링 과정을 따라가려고 한다.
  
```bash
npm init -y
npm i -D jest babel-jest @babel/core @babel/preset-env
```


- 추출 작업전 지역변수부터 제거
- 유효범위를 신경써야할 대상이 줄어든다.
- 특별한 경우가 아니라면 성능문제는 일단 무시하고 리팩터링을 진행
- 만약 리팩터링으로 성능이 떨어진다면 마무리하고나서 성능을 개선하라

### volumeCredits 변수를 제거하는 작업의 단계를 4단계에 걸처서 수행
1. 반복문 쪼개기로 변수 값을 누적시키는 부분을 분리
2. 문장슬라이드하기로 변수 초기화 문장을 변수 값 누적 코드 바로 앞으로 이동
3. 함수 추출하기로 적립 포인트 계산 부분을 별도 함수로 추출
4. 변수 인라인하기로 volumeCredits 변수를 제거

### 계산 단계와 포맷팅 단계 분리하기
골격은 충분히 개선되었다.  
이제 `statement()` 의 HTML 버전을 만드는 작업을 진행한다.  
`단계쪼개기` 방법 사용